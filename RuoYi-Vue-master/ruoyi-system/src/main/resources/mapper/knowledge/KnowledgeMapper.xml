<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ruoyi.knowledge.mapper.KnowledgeMapper">

    <resultMap type="Knowledge" id="KnowledgeResult">
        <result property="informid"    column="informID"    />
        <result property="inform"    column="inform"    />
        <result property="weight"    column="weight"    />
        <result property="disastertype"    column="disastertype"    />
        <result property="disposeobj"    column="disposeobj"    />
        <result property="detailtype"    column="detailtype"    />
        <result property="informtypeid"    column="informtypeID"    />
    </resultMap>

    <sql id="selectKnowledgeVo">
        select informID, inform, weight, disastertype, disposeobj, detailtype, informtypeID from Knowledge
    </sql>

    <select id="selectKnowledgeList" parameterType="Knowledge" resultMap="KnowledgeResult">
        <include refid="selectKnowledgeVo"/>
        <where>
            <if test="inform != null  and inform != ''"> and inform like concat('%', #{inform}, '%')</if>
            <if test="disastertype != null "> and disastertype = #{disastertype}</if>
            <if test="disposeobj != null "> and disposeobj = #{disposeobj}</if>
            <if test="detailtype != null "> and detailtype = #{detailtype}</if>
        </where>
    </select>

    <select id="selectKnowledgeByInformid" parameterType="Long" resultMap="KnowledgeResult">
        <include refid="selectKnowledgeVo"/>
        where informID = #{informid}
    </select>

    <insert id="insertKnowledge" parameterType="Knowledge" useGeneratedKeys="true" keyProperty="informid">
        insert into Knowledge
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="inform != null and inform != ''">inform,</if>
            <if test="weight != null">weight,</if>
            <if test="disastertype != null">disastertype,</if>
            <if test="disposeobj != null">disposeobj,</if>
            <if test="detailtype != null">detailtype,</if>
            <if test="informtypeid != null">informtypeID,</if>
        </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="inform != null and inform != ''">#{inform},</if>
            <if test="weight != null">#{weight},</if>
            <if test="disastertype != null">#{disastertype},</if>
            <if test="disposeobj != null">#{disposeobj},</if>
            <if test="detailtype != null">#{detailtype},</if>
            <if test="informtypeid != null">#{informtypeid},</if>
        </trim>
    </insert>

    <update id="updateKnowledge" parameterType="Knowledge">
        update Knowledge
        <trim prefix="SET" suffixOverrides=",">
            <if test="inform != null and inform != ''">inform = #{inform},</if>
            <if test="weight != null">weight = #{weight},</if>
            <if test="disastertype != null">disastertype = #{disastertype},</if>
            <if test="disposeobj != null">disposeobj = #{disposeobj},</if>
            <if test="detailtype != null">detailtype = #{detailtype},</if>
            <if test="informtypeid != null">informtypeID = #{informtypeid},</if>
        </trim>
        where informID = #{informid}
    </update>

    <delete id="deleteKnowledgeByInformid" parameterType="Long">
        delete from Knowledge where informID = #{informid}
    </delete>

    <delete id="deleteKnowledgeByInformids" parameterType="String">
        delete from Knowledge where informID in
        <foreach item="informid" collection="array" open="(" separator="," close=")">
            #{informid}
        </foreach>
    </delete>
</mapper>